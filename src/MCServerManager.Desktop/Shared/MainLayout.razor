@using MCServerManager.Desktop.Managers
@inherits LayoutComponentBase
@inject ServerManager ServerManager

<MudThemeProvider IsDarkMode="true"/>
<MudDialogProvider CloseButton="true"
				   CloseOnEscapeKey="true"
				   FullWidth="true"
				   MaxWidth="MaxWidth.Medium"
				   Position="DialogPosition.TopCenter"/>
<MudSnackbarProvider/>

<MudLayout>
	<MudAppBar Elevation="0" Dense="true" Fixed="true" DisableGutters="true" Class="px-1">
		<MudToggleIconButton @bind-Toggled="@_drawerOpen"
							 Icon="@Icons.Material.Filled.Menu"
							 ToggledIcon="@Icons.Material.Filled.MenuOpen"/>
		@if (ServerManager.Count > 0 && ServerManager.CurrentServer is not null)
		{
			<ServerSelector/>
		}
		<MudSpacer/>
		<TaskList/>
	</MudAppBar>
	<MudDrawer @bind-Open="@_drawerOpen"
			   ClipMode="DrawerClipMode.Always"
			   Elevation="1"
			   PreserveOpenState="true"
			   Variant="DrawerVariant.Mini"
			   Width="150px">
		<NavMenu/>
		<MudSpacer/>
		<MudIconButton Color="Color.Inherit"
		               Icon="@Icons.Custom.Brands.GitHub"
		               Link="https://github.com/Tabizzz/MCServerManager/tree/desktop"
		               Target="_blank"/>
	</MudDrawer>
	<MudMainContent Style="height: 100%">
		<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="pt-4" Style="height: 100%">
			<CascadingValue Value="this">
				@Body
			</CascadingValue>
		</MudContainer>
	</MudMainContent>
</MudLayout>
